
<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8">
  <title>Муушиг 2 тоглогч</title>
  <style>
    body {
      background-color: green;
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      height: 100vh;
    }
    .card {
      width: 72px;
      height: auto;
      margin: 5px;
      transition: transform 0.3s ease, opacity 0.3s;
      cursor: pointer;
    }
    .hand-row {
      display: flex;
      justify-content: center;
    }
    .deck-area, .buttons {
      display: flex;
      justify-content: center;
      margin: 10px;
      gap: 12px;
    }
    .label {
      color: yellow;
      font-size: 14px;
      margin: 5px;
    }
    .played {
      opacity: 0.5;
      pointer-events: none;
    }
    .highlight {
      border: 2px solid gold;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: darkgreen;
      color: white;
      border: none;
      border-radius: 6px;
    }
    button:hover {
      background-color: forestgreen;
    }
    @media (max-width: 600px) {
      .card { width: 50px; }
      button { font-size: 14px; padding: 8px 16px; }
    }
  </style>
</head>
<body>

  <div class="hand-row" id="bot-hand"></div>
  <div class="label">Анжу</div>

  <div class="deck-area">
    <img id="deck" src="cards/card-back.png" class="card">
    <img id="trump-card" src="cards/7C.png" class="card">
  </div>

  <div class="buttons">
    <button onclick="resetGame()">Дахин</button>
  </div>

  <div class="hand-row" id="player-hand"></div>
  <div class="label">Бямбаа</div>

<script>
  const playerCards = ["7H", "10D", "QC", "KH", "AD"];
  const botCards = ["7S", "8D", "9H", "10C", "AS"];
  const trumpSuit = "C"; // trump is Clubs

  function loadHand(containerId, cards, isPlayer) {
    const container = document.getElementById(containerId);
    container.innerHTML = "";
    cards.forEach((cardName, idx) => {
      const img = document.createElement("img");
      img.src = "cards/" + cardName + ".png";
      img.className = "card " + (isPlayer ? "player-card" : "bot-card");
      img.dataset.rank = getCardValue(cardName);
      img.dataset.suit = cardName.slice(-1);
      img.dataset.name = cardName;
      if (isPlayer) {
        img.onclick = () => playCard(img);
      }
      container.appendChild(img);
    });
  }

  function getCardValue(card) {
    const rank = card.replace(/[CDHS]/, "");
    return {"7":7,"8":8,"9":9,"10":10,"J":11,"Q":12,"K":13,"A":14}[rank];
  }

  function playCard(playerCard) {
    if (playerCard.classList.contains("played")) return;

    playerCard.classList.add("played", "highlight");

    const botCard = selectBotCard(playerCard.dataset.suit, parseInt(playerCard.dataset.rank));
    botCard.classList.add("played");
    botCard.style.border = "2px solid red";

    const winner = determineWinner(playerCard, botCard);
    setTimeout(() => alert(winner + " хожлоо!"), 600);
  }

  function selectBotCard(playerSuit, playerRank) {
    const all = [...document.querySelectorAll(".bot-card:not(.played)")];
    const sameSuit = all.filter(c => c.dataset.suit === playerSuit);
    const trump = all.filter(c => c.dataset.suit === trumpSuit);

    if (sameSuit.length) {
      const stronger = sameSuit.find(c => parseInt(c.dataset.rank) > playerRank);
      return stronger || sameSuit[0];
    } else if (trump.length) {
      return trump[0];
    } else {
      return all.sort((a,b) => a.dataset.rank - b.dataset.rank)[0];
    }
  }

  function determineWinner(p, b) {
    const ps = p.dataset.suit, bs = b.dataset.suit;
    const pr = parseInt(p.dataset.rank), br = parseInt(b.dataset.rank);

    if (ps === bs) return pr >= br ? "Тоглогч" : "Бот";
    if (bs === trumpSuit) return "Бот";
    return "Тоглогч";
  }

  function resetGame() {
    loadHand("player-hand", playerCards, true);
    loadHand("bot-hand", botCards, false);
  }

  window.onload = resetGame;
</script>

</body>
</html>
